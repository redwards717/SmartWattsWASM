@inject AppState appState

<div class="row">
    <div class="col-6">
        <h4>Rolling Weekly Volume</h4>
         @{int period = 7;}
        <table class="table table-sm table-bordered">
            <tr>
                <th>Time Frame</th>
                <th>Volume</th>
                <th>Intensity</th>
                <th>@Constants.ANAEROBIC Efforts</th>
                <th>@Constants.VO2 Efforts</th>
                <th>@Constants.THRESHOLD Efforts</th>
            </tr>
            @for(int i = 0; i <= period * 5; i += period)
            {
                <tr>
                @if(i == 0)
                {
                    <th>@now.AddDays(-period).ToString("dd MMMM") to Current:</th>
                    <td>@PowerUtlities.GetVolumeInTime(appState.LoggedInUser.Activities, now.AddDays(-period), now)</td>
                }
                else
                {
                    <th>@now.AddDays(-(i+period)).ToString("dd MMMM") to @now.AddDays(-i).ToString("dd MMMM"):</th>
                    <td>@PowerUtlities.GetVolumeInTime(appState.LoggedInUser.Activities, now.AddDays(-(i+period)), now.AddDays(-i))</td>
                }
                    <td>@PowerUtlities.GetIntensityForTimeframe(appState.LoggedInUser.Activities, now.AddDays(-(i+period)), now.AddDays(-i))</td>
                    <td>@PowerUtlities.GetSustainedEfforts(appState.LoggedInUser.Activities, now.AddDays(-(i+period)), now.AddDays(-i), @Constants.AnaerobicPZ.Time)</td>
                    <td>@PowerUtlities.GetSustainedEfforts(appState.LoggedInUser.Activities, now.AddDays(-(i+period)), now.AddDays(-i), @Constants.VO2PZ.Time)</td>
                    <td>@PowerUtlities.GetSustainedEfforts(appState.LoggedInUser.Activities, now.AddDays(-(i+period)), now.AddDays(-i), @Constants.ThresholdPZ.Time)</td>
                </tr>
            }
            <tr>
                <th>Avg over past 365 days</th>
                <td>@PowerUtlities.GetAvgVolume(appState.LoggedInUser.Activities, now.AddDays(-365), now, 365/period)</td>
                <td>@PowerUtlities.GetAvgIntensity(appState.LoggedInUser.Activities, now.AddDays(-365), now, 365/period)</td>
                <td>@PowerUtlities.GetAvgSustainedEfforts(appState.LoggedInUser.Activities, now.AddDays(-365), now, @Constants.AnaerobicPZ.Time, 365/period)</td>
                <td>@PowerUtlities.GetAvgSustainedEfforts(appState.LoggedInUser.Activities, now.AddDays(-365), now, @Constants.VO2PZ.Time, 365/period)</td>
                <td>@PowerUtlities.GetAvgSustainedEfforts(appState.LoggedInUser.Activities, now.AddDays(-365), now, @Constants.ThresholdPZ.Time, 365/period)</td>
            </tr>
        </table>
    </div>

    <div class="col-6">
        <h4>Rolling Monthly Volume</h4>
         @{period = 30;}
        <table class="table table-sm table-bordered">
            @for(int i = 0; i <= period * 5; i += period)
            {
                <tr>
                @if(i == 0)
                {
                    <th>@now.AddDays(-period).ToString("dd MMMM") to Current:</th>
                    <td>@PowerUtlities.GetVolumeInTime(appState.LoggedInUser.Activities, now.AddDays(-period), now)</td>
                }
                else
                {
                    <th>@now.AddDays(-(i+period)).ToString("dd MMMM") to @now.AddDays(-i).ToString("dd MMMM"):</th>
                    <td>@PowerUtlities.GetVolumeInTime(appState.LoggedInUser.Activities, now.AddDays(-(i+period)), now.AddDays(-i))</td>
                }
                    <td>@PowerUtlities.GetIntensityForTimeframe(appState.LoggedInUser.Activities, now.AddDays(-(i+period)), now.AddDays(-i))</td>
                </tr>                       
            }
        </table>
    </div>

</div>

@code {
    DateTime now = DateTime.Now;


}
